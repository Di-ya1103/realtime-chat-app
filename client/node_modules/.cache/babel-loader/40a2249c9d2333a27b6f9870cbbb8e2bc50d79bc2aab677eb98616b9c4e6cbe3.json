{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Diya\\\\Documents\\\\realtime-chat-app\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\nimport Login from './components/Login';\nimport ChatList from './components/ChatList';\nimport ChatWindow from './components/ChatWindow';\nimport { getUsers } from './services/api';\nimport './styles.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\nexport default function App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [users, setUsers] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState(new Set());\n  const [activeChat, setActiveChat] = useState(null);\n  const socketRef = useRef(null);\n  useEffect(() => {\n    if (!user) return;\n    const socket = io(SOCKET_URL);\n    socketRef.current = socket;\n    socket.on('connect', () => {\n      socket.emit('user:connect', user);\n    });\n    socket.on('update:users', list => {\n      setOnlineUsers(new Set(list));\n    });\n    socket.on('receive:message', msg => {\n      window.dispatchEvent(new CustomEvent('socket:message', {\n        detail: msg\n      }));\n    });\n    socket.on('update:users', list => {\n      console.log('Received update:users:', list);\n      setOnlineUsers(new Set(list));\n    });\n    socket.on('receive:message', msg => {\n      console.log('Received message:', msg);\n      window.dispatchEvent(new CustomEvent('socket:message', {\n        detail: msg\n      }));\n    });\n    return () => {\n      socket.disconnect();\n      socketRef.current = null;\n    };\n  }, [user]);\n  useEffect(() => {\n    if (user) fetchUsers();\n  }, [user]);\n  const fetchUsers = async () => {\n    try {\n      const us = await getUsers();\n      setUsers(us.filter(u => u._id !== user._id));\n    } catch (err) {\n      console.error('fetchUsers error:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: !user ? /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: setUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile\",\n          children: [\"Logged in as \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 51\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ChatList, {\n          users: users,\n          onlineUsers: onlineUsers,\n          onOpen: setActiveChat\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"main\",\n        children: activeChat ? /*#__PURE__*/_jsxDEV(ChatWindow, {\n          user: user,\n          other: activeChat,\n          socket: socketRef.current\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty\",\n          children: \"Open a chat to start messaging\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"RrKjHWEO9XWQi93sx6UJA82Tx4U=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","Login","ChatList","ChatWindow","getUsers","jsxDEV","_jsxDEV","Fragment","_Fragment","SOCKET_URL","process","env","REACT_APP_SOCKET_URL","App","_s","user","setUser","users","setUsers","onlineUsers","setOnlineUsers","Set","activeChat","setActiveChat","socketRef","socket","current","on","emit","list","msg","window","dispatchEvent","CustomEvent","detail","console","log","disconnect","fetchUsers","us","filter","u","_id","err","error","className","children","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","username","onOpen","other","_c","$RefreshReg$"],"sources":["C:/Users/Diya/Documents/realtime-chat-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport io from 'socket.io-client';\r\nimport Login from './components/Login';\r\nimport ChatList from './components/ChatList';\r\nimport ChatWindow from './components/ChatWindow';\r\nimport { getUsers } from './services/api';\r\nimport './styles.css';\r\n\r\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\r\n\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [onlineUsers, setOnlineUsers] = useState(new Set());\r\n  const [activeChat, setActiveChat] = useState(null);\r\n  const socketRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const socket = io(SOCKET_URL);\r\n    socketRef.current = socket;\r\n\r\n    socket.on('connect', () => {\r\n      socket.emit('user:connect', user);\r\n    });\r\n\r\n    socket.on('update:users', (list) => {\r\n      setOnlineUsers(new Set(list));\r\n    });\r\n\r\n    socket.on('receive:message', (msg) => {\r\n      window.dispatchEvent(new CustomEvent('socket:message', { detail: msg }));\r\n    });\r\n    socket.on('update:users', (list) => {\r\n  console.log('Received update:users:', list);\r\n  setOnlineUsers(new Set(list));\r\n});\r\nsocket.on('receive:message', (msg) => {\r\n  console.log('Received message:', msg);\r\n  window.dispatchEvent(new CustomEvent('socket:message', { detail: msg }));\r\n});\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n      socketRef.current = null;\r\n    };\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (user) fetchUsers();\r\n  }, [user]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const us = await getUsers();\r\n      setUsers(us.filter((u) => u._id !== user._id));\r\n    } catch (err) {\r\n      console.error('fetchUsers error:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      {!user ? (\r\n        <Login onLogin={setUser} />\r\n      ) : (\r\n        <>\r\n          <aside className=\"sidebar\">\r\n            <div className=\"profile\">Logged in as <strong>{user.username}</strong></div>\r\n            <ChatList\r\n              users={users}\r\n              onlineUsers={onlineUsers}\r\n              onOpen={setActiveChat}\r\n            />\r\n          </aside>\r\n          <main className=\"main\">\r\n            {activeChat ? (\r\n              <ChatWindow user={user} other={activeChat} socket={socketRef.current} />\r\n            ) : (\r\n              <div className=\"empty\">Open a chat to start messaging</div>\r\n            )}\r\n          </main>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}